<html>

<head onload="KeyColor()">
	<title>cookie</title>

	<style>
		:root {
			--background-color: #333;
			--bg-dark-color: #222;
			--bg-highlight-color: #444;
			--bg-green-color: #243;
			--bg-purple-color: #423;
			--bg-yellow-color: #430;
			--main-color: #bfbfff;
			--alt-color: #8f8fbf;
			--green-color: #80ffbf;
			--purple-color: #ff80bf;
			--yellow-color: #ffbf00;
			--gray-color: #aaa;
		}

		body {
			background-color: var(--background-color);
			color: white;
			font-family: "Times New Roman", Times, serif;
		}

		h1 {
			position: relative;
			font-size: 80px;
			left: -250px;
		}
		.score {
			position: absolute;
			top: 5px;
			left: 5px;
			text-align: left;
			margin: 5px;
		}

		.lives {
			position: absolute;
			top: 55px;
			left: 5px;
			text-align: left;
			margin: 5px;
		}

		.last {
			position: absolute;
			top: 105px;
			left: 5px;
			text-align: left;
			margin: 5px;
		}

		.highscore {
			position: absolute;
			top: 5px;
			left: 200px;
			text-align: left;
			margin: 5px;
		}

		.hangmanbg {
			position: absolute;
			top: -25px;
			left: 1250px;
			text-align: left;
			margin: 5px;
		}


		.answer {
			position: relative;
			display: inline-block;
			text-align: center;
			width: 500px;
			font-size: 50px
		}

		.answer1 {
			position: absolute;
			display: inline-block;
			top: 105px;
			font-size: 30px;
			width: 500px;
			height: 200px;
		}

		.answers {
			border: 6px solid #FFFFFF;
			position: relative;
			border-radius: 50px;
			width: 1000px;
			height:250px
		}

		.key {
			position: relative;
			display: inline-block;
			border-radius: 5px;
			border: 4px solid #FFFFFF;
			color: black;
			border-spacing: 15px;
			top: 100px;
			margin: 2px;
			right: 200px;
			font-size: 75px;
			width: 100px;
			text-align: center;
			background-color: #FFFFFF;

		}

		.keys {
			position: relative;
			width: 1000px;
			left: 200px;
		}


		.answer {
			position: relative;
			text-align: center;
		}
	</style>

	</head>

	<body onload="randomize()">
		<div id="scoreBox">
			<div id="score">Score: 0</div>
			<div id="highscore">Highscore: 0</div>
			<div id="lives">Lives: 3</div>
			<div id="wordBank"></div>
		</div>
		<p id="category"></p>
		<div id="word" class="answer"></div>
		<div id="keys"></div>

		<!-- <img src="hangmanbg.png" class="hangmanbg"> -->

	</body>
	<script>
		let divKeys = document.getElementById('keys');
		let letterList = 'abcdefghijklmnopqrstuvwxyz';
		for (let i = 0; i < letterList.length; i++) {
			divKeys.innerHTML += `<div id="${letterList[i]}" class="key" onclick="guess('${letterList[i]}')">${letterList[i]}</div>`
		}
		var score = 0;
		var highscore = 0;
		var lives = 3;
		var word;
		var letters;
		var displayWord = "";
		var savedWord;


		var wordObj = {{ wordObj | tojson }}
		wordList = Object.keys(wordObj)
		document.getElementById('wordBank').innerHTML = wordList[0]
		for (let i = 1; i < wordList.length; i++) {
			document.getElementById('wordBank').innerHTML += ', ' + wordList[i]
		}

		function randomize() {


			word = wordList[Math.floor(Math.random() * wordList.length)];

			document.getElementById("category").innerHTML = wordObj[word];

			letters = word.split('');
			displayWord = "";
			for (var i = 0; i < word.length; i++) {
				displayWord = displayWord + "_ ";
				savedWord = displayWord.split('');
			}




			document.getElementById("word").innerHTML = displayWord;


		}

		function keycolor() {
			elements = document.getElementsByClassName("key")
			elements[i].style.backgroundColor = "dcf0ef";
		}



		function guess(l) {
			closeLetter(l);
			var check = false;
			for (var i = 0; i < letters.length; i++) {

				if (l == letters[i]) {
					check = true;
				}
			}

			if (check == true) {
				displayWord = "";
				for (var i = 0; i < word.length; i++) {
					if (letters[i] == l) {
						displayWord = displayWord + l + " ";
						savedWord[i] = l;
					} else if (letters[i] == savedWord[i]) {
						displayWord = displayWord + savedWord[i] + " ";
					} else {
						displayWord = displayWord + "_ ";
					}

				}
				document.getElementById("word").innerHTML = displayWord;




				if (displayWord.slice(0, -1) == word.split('').join(' ')) {
					//they solved the word
					lastword = word
					document.getElementById("last").innerHTML = "Previous Word: " + lastword;

					score += lives;
					if (score > highscore) {
						highscore = score;
					}
					randomize();
					resetLetters();
				}

				document.getElementById("score").innerHTML = "Score: " + score;
				document.getElementById("highscore").innerHTML = "Highscore: " + highscore;
				document.getElementById("lives").innerHTML = "Lives: " + lives;


			} else {
				//they guessed a wrong letter

				lives--;
				if (lives < 1) {
					//they lost

					if (lives == 0) {
						lastword = word
						score = 0;
						randomize();
						resetLetters();

						document.getElementById("last").innerHTML = "Previous Word: " + lastword;
					}
				}
				document.getElementById("score").innerHTML = "Score: " + score;
				document.getElementById("lives").innerHTML = "Lives: " + lives;


			}
		}

		function closeLetter(letter) {
			document.getElementById(letter).style.backgroundColor = "#b5b5b5";
		}

		function resetLetters() {
			elements = document.getElementsByClassName("key");
			for (var i = 0; i < elements.length; i++) {

				elements[i].style.backgroundColor = "FFFFFF";

			}

		}
	</script>

</body>

</html>
